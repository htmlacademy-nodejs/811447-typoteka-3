extends layout.pug

block content
  main.main-page
    h1.visually-hidden Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð»Ð¾Ð³Ð° Ð¢Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°
    p
      | Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð»Ð¾Ð³Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐµÐ±Ñ ðŸ‘
    section(class='main-page__theme-list')
      h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚ÐµÐ¼
      ul.themes
        each category in categories
          if category.count > 1
            li(class='themes__item')
              a(class='themes__item-link' href=`/articles/category/${category.id}`) #{category.name}
                sup #{category.count}

    div(class='main-page__section-flex')
      section(class='main-page__hot hot')
        h2(class='hot__name') Ð¡Ð°Ð¼Ð¾Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼Ð¾Ðµ
          span(class='hot__icon hot__icon--fire')
        if !articlesCommented.length
          p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
        else
          ul(class='hot__list')
            each article in articlesCommented
              li(class='hot__list-item')
                a(class='hot__list-link' href=`/articles/${article.id}`)
                  | #{truncateText(article.announce)}
                  sup(class='hot__link-sup') #{article.comments.length}

      section(class='main-page__last last')
        h2(class='last__name') ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
          span(class='last__icon last__icon--cloud')
        if !comments.length
          p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
        else
          ul(class='last__list')
            each comment in comments
              li(class='last__list-item')
                img(class='last__list-image' src=`/img/${comment['user.avatar']}` width='20' height='20' alt='ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ')
                b(class='last__list-name') #{comment['user.firstName']} #{comment['user.lastName']}
                a(class='last__list-link' href=`/articles/${comment.id}`) #{truncateText(comment['comments.text'])}
    section(class='main-page__list preview')
      h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ²ÑŒÑŽ ÑÑ‚Ð°Ñ‚ÐµÐ¹
      ul(class='preview__list')
        each article in articles
          li(class='preview__item')
            ul(class='preview__breadcrumbs')
              each category in article.categories
                li(class='preview__breadcrumbs-item')
                  a(class='preview__breadcrumbs-link' href=`/articles/category/${category.id}`) #{category.name}
            div(class='preview__background')
              img(class='preview__background-image' src=`/img/${article.picture}` width='460' height='240' alt=article.title)
            time(class='preview__time' datetime='2019-03-21T20:33') #{formatShortDate(article.createdAt)}
            h3(class='preview__name')
              a(class='preview__name-link' href=`/articles/${article.id}`) #{article.title}
            p(class='preview__text') #{article.announce}

            a(class='preview__comment' href=`/articles/${article.id}`) ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
              span(class='preview__cloud')
              b(class='preview__comment-count') #{article.comments.length}
    if totalPages > 1
      +pagination(page, totalPages, 8, '?')
